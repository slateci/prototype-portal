{%extends "base.html"%}

{%block title%}
  Create New Volume
{%endblock%}

{%block body%}
<section id="volume-create" class="bg-light">
  <div class="container">

    <div class="row">
      <div class="col-lg-12 mx-auto">
        {%include 'messages.html' %}
          <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="{{url_for('dashboard')}}">Home</a></li>
            <li class="breadcrumb-item"><a href="{{url_for('list_volumes')}}">Volumes</a></li>
            <li class="breadcrumb-item active">New Volume</li>
          </ol>
        <h1>Create New Volume</h1>
        <p class="lead">
          Enter Volume information below
        </p>

        <hr/>

            <form role="form" action="{{url_for('create_volume')}}" method="POST">
              {% if not minislate_user %}
              <div class="form-group">
                <input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>
              </div>
              {% endif %}
              <div class="form-group">
                <label for="name">Volume Name * (lowercase, alpha-numeric and -)</label>
                <input
                  type="text"
                  class="form-control"
                  id="volume-name"
                  name="volume-name"
                  placeholder="Volume name"
                  pattern="[a-zA-Z0-9-]+"
                  required="required"
                  tabindex="1"
                  style="text-transform:lowercase"
                  maxlength="64"
                >
              </div>
              
              <div class="form-group">
                <label for="group">Group</label>
                <select
                  class="form-control"
                  id="group"
                  name="group"
                  required="required"
                  tabindex="1"
                  style="width:300px;">
                  <option value="" selected disabled>Select Group</option>
                  <option v-for="group in groups" :value="group.metadata.name">{[{group.metadata.name}]}</option>
                </select>
              </div>

              <div class="form-group">
                <label for="cluster">Cluster</label>
                <span v-if='loading'>
                  Loading Data <i class="fas fa-sync fa-spin"></i>
                </span>
                <span v-if='failed'>
                  Failed to load the data, please refresh the page <i class="far fa-times-circle"></i>
                </span>
                <select class="form-control" id="cluster" name="cluster" required="required" tabindex="2">
                  <option value="" selected disabled>--- Select One ---</option>
                  <option v-for='cluster in clusters' :value="cluster.metadata.name">{[{cluster.metadata.name}]}</option>
                </select>
              </div>

              <div class="form-group">
                <label for="storageRequest">Volume Size * (expressed in: E, P, T, G, M, K, Ei, Pi, Ti, Gi, Mi, Ki)</label>
                <input 
                  type="text"
                  class="form-control"
                  id="storageRequest"
                  name="storageRequest"
                  placeholder="1G"
                  pattern="\d{1,5}[a-zA-Z]{1,2}"
                  required="required"
                  tabindex="1"
                  maxlength="64"
              </div>
              
              <div class="form-group">
                <label for="storageClass">Kubernetes StorageClass * (lowercase, alpha-numeric and -)</label>
                <input
                  type="text"
                  class="form-control"
                  id="storageClass"
                  name="storageClass"
                  placeholder="nfs-provisioner"
                  pattern="[a-zA-Z0-9-]+"
                  required="required"
                  tabindex="1"
                  style="text-transform:lowercase"
                  maxlength="64"
                >
              </div>
                
              <div class="form-group">
                <label for="accessMode">AccessMode * (ReadWriteOnce, ReadWriteMany, ReadOnlyMany)</label>
                <input
                  type="text"
                  class="form-control"
                  id="accessMode"
                  name="accessMode"
                  placeholder="ReadWriteOnce"
                  pattern="[a-zA-Z0-9-]+"
                  required="required"
                  tabindex="1"
                  maxlength="64"
                >
              </div>
                
              <div class="form-group">
                <label for="volumeMode">VolumeMode * (Filesystem, Block)</label>
                <input
                  type="text"
                  class="form-control"
                  id="volumeMode"
                  name="volumeMode"
                  placeholder="Filesystem"
                  pattern="[a-zA-Z0-9-]+"
                  required="required"
                  tabindex="1"
                  maxlength="64"
                >
              </div>

              <div class="form-group">
                <button type="submit" class="btn btn-primary">Create</button>
              </div>
            </form>

      </div>

    </div>
  </div>
</section>

{%endblock%}
